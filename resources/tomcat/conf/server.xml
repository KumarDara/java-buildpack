<?xml version='1.0' encoding='utf-8'?>
<!--
  ~ Copyright 2013-2016 the original author or authors.
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~      http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->

<Server port='-1'>

    <Service name='Catalina'>
        <Connector port='${http.port}' bindOnInit="false" connectionTimeout="20000"/>

        <Engine defaultHost='localhost' name='Catalina'>
            <Valve className="org.apache.catalina.valves.RemoteIpValve" protocolHeader="x-forwarded-proto"/>
            <Valve className="com.gopivotal.cloudfoundry.tomcat.logging.access.CloudFoundryAccessLoggingValve"
                   pattern='[ACCESS] %{org.apache.catalina.AccessLog.RemoteAddr}r %l %t %D %F %B %S vcap_request_id:%{X-Vcap-Request-Id}i'
                   enabled="${access.logging.enabled}"/>
            <Host name='localhost'>
                <Listener className="com.gopivotal.cloudfoundry.tomcat.lifecycle.ApplicationStartupFailureDetectingLifecycleListener"/>
                          <!-- 1 - Ensure root module registration -->
          	    <Context path="/ebx-root-1.0" docBase="ebx/ebx-root-1.0.war"/>
           
          	    <!-- 2 - Ensure core modules registration -->
          	    <Context path="/ebx-dma" docBase="ebx/ebx-dma.war"/>      
          	    <Context path="/ebx-dataservices" docBase="ebx/ebx-dataservices.war"/>   
          	    <Context path="/ebx-manager" docBase="ebx/ebx-manager.war"/>
           
          	    <!-- 3 - Declare used add-ons and your specific module -->
          	    ....
          	    
          	    <!-- 4 - Start EBX -->
          	    <Context path="/ebx" crossContext="true" docBase="ebx.war”/>
            </Host>
        </Engine>
    </Service>

</Server>
